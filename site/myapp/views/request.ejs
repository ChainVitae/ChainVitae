<!DOCTYPE html>
<html lang="en">
  <head>
    <title>ChainVitae</title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  </head>

  <body>
    <nav class="navbar sticky-top navbar-light bg-light">
      <a class="navbar-brand"> ChainVitae</a>
      <div class="dropdown show">
        <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Choose account...
        </a>

        <div id="accountList" class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuLink">
        </div>
      </div>
    </nav>

    <!-- <div class="container"> -->
      <div class="row container-fluid sidebar">
        <div class="col-2 px-3" style="background-color: pink; padding-top: 50px">
          <ul class="nav flex-column">
            <li class="nav-item">
              <a class="nav-link" href="/career">Career Record</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="#">Request</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">CV Maker</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/register">Register</a>
            </li>
          </ul>
        </div>
        <div class="col-10">
          <div class="container">
            <h1 class="text-center top-buffer3"> Request for Experience </h1>
            <h3 class="top-buffer1">Request Details</h3>
            <div class="card card-outline-secondary top-buffer1">
              <div class="card-block">
                <form class="form" role="form" method="post" action="/request/submit" autocomplete="off">
                  <div class="form-group row top-buffer1">
                    <label class="col-lg-2 col-form-label form-control-label text-center">Company Addr</label>
                    <div class="col-lg-9 mr-1">
                      <input class="form-control" name="address" type="text" placeholder="Ethereum address of the Company">
                    </div>
                  </div>
                  <div class="form-group row">
                    <label class="col-lg-2 col-form-label form-control-label text-center">Positon</label>
                    <div class="col-lg-9 mr-1">
                      <input class="form-control" name="position" type="text" placeholder="Position Title">
                    </div>
                  </div>
                  <div class="form-group row">
                    <label class="col-lg-2 col-form-label form-control-label text-center">Start Date</label>
                    <div class="col-lg-9 mr-1">
                      <input class="form-control" name="start" type="text" placeholder="Date when the job started">
                    </div>
                  </div>
                  <div class="form-group row">
                    <label class="col-lg-2 col-form-label form-control-label text-center">End Date</label>
                    <div class="col-lg-9 mr-1">
                      <input class="form-control" name="end" type="text" placeholder="Date when the job ended">
                    </div>
                  </div>
                  <div class="form-group row">
                    <label class="col-lg-2 col-form-label form-control-label text-center">Remark</label>
                    <div class="col-lg-9 mr-1">
                      <input class="form-control" type="text" placeholder="Optional">
                    </div>
                  </div>
                  <input type="submit">
                </form>
              </div>
            </div>

            <hr />

            <h3 class="top-buffer3"> Pending </h3>
            <table class="table table-bordered top-buffer1" id="careerBody">
              <thead>
                <th>#</th>
                <td>Qualification</td>
                <td>Institution</td>
                <td>Start Date</td>
                <td>End Date</td>
              </thead>
            </table>
          </div>
        </div>
      </div>
    <!-- </div> -->

  </body>
  <script>
  var accounts = <%- JSON.stringify(accounts) %>;
  for (var i=0; i<accounts.length; i++){
    $("#accountList").append(
      "<a class='dropdown-item href='#'>" +
      accounts[i] +
      "</a>");
  }

  $(".dropdown-menu a").click(function(){
    $(".btn:first-child").text($(this).text());
    $(".btn:first-child").val($(this).text());

  });
    var vitaes = <%- JSON.stringify(vitae) %>

    if(vitaes.length == 0) {
      $("#careerBody").append("<tbody>"+
        "<td colspan='5' class='text-center'>" + "No pending at this moment" + "</td>"+
      "</tbody>");
    }

    for (var i=0; i<vitaes.length;i++) {
      $("#careerBody").append("<tbody>"+
        "<th>" + (i+1) +"</th>"+
        "<td>" + vitaes[i].position + "</td>"+
        "<td>" + vitaes[i].institution + "</td>"+
        "<td>" + vitaes[i].from + "</td>"+
        "<td>" + vitaes[i].to + "<button type='button' class='close text-center' aria-label='Close'>" +
          "<span aria-hidden='true'>&times;</span>" +
        "</button></td>" +
      "</tbody>");
    }

  </script>
</html>
